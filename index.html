<!doctype html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<title>首頁 - 國立臺灣交響樂團解謎互動遊戲</title>
	<meta name="keywords" content="{關鍵字}" />
	<meta name="description" content="{描述}" >
	<!-- facebook meta start -->
	<meta property="og:site_name" content="國立臺灣交響樂團解謎互動遊戲" /><!-- 請pm協助進行定義 注意要與<description>相同 -->
	<meta property="og:type" content="website" >
	<meta property="og:image" content="style/images/fb/fb.jpg" /><!-- 請程式設計師注意路徑問題 -->
	<meta property="og:url" content="{這裡}" /><!-- 請程式設計師注意路徑問題 -->
	<meta property="og:title" content="國立臺灣交響樂團解謎互動遊戲" /><!-- 請pm協助進行定義 注意要與<title>相同 -->
	<meta property="og:description" content="{描述}" /><!-- 請pm協助進行定義 注意要與<description>相同 -->
	<!-- facebook meta end -->
	<!-- 網頁顯示的寬度等於裝置寬度 -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- ios 不自動偵測電話 -->
	<meta name="format-detection" content="telephone=no">
	<!--apple-touch-icon-->
	<link href="style/images/ios/apple-touch-icon.png" rel="apple-touch-icon" />
	<link href="style/images/ios/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" />
	<link href="style/images/ios/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" />
	<link href="style/images/ios/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" />
	<link href="style/images/ios/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" />
	<link href="style/images/ios/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" />
	<link href="style/images/ios/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" />
	<link href="style/images/ios/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" />
	<link href="style/images/ios/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" />
	<!--android-touch-icon-->
	<link href="style/images/android/icon-hires.png" rel="icon" sizes="192x192" />
	<link href="style/images/android/icon-normal.png" rel="icon" sizes="128x128" />
	<!--favicon-->
	<link rel="shortcut icon" href="style/images/favicon.ico">
	<!-- css link file start -->
	<!-- CSS Link File Start -->
	<link media="screen" rel="stylesheet" href="style/css/main.css?t=20201110v1" />
	<!-- CSS 模組樣式  -->
	<link media="screen" rel="stylesheet" href="style/css/pg_index.css?t=20201110v1" />
	<!-- CSS page樣式  -->
	<!-- CSS Link File End -->
</head>
<body>
	<div class="wrap">
		<div class="wrap__bg"></div>
		<!-- 選單 -->
		<div class="menu">
			<div class="menu__inner">
				<a class="menu__trigger" href="#" title="選單">
					<img src="style/images/events/elements/menu-icon.png" alt="選單">
				</a>
				<ul class="menu__list">
					<li class="menu__item">
						<a href="room.html" class="menu__link">Room</a>
					</li>
					<li class="menu__item">
						<a href="story.html" class="menu__link">Story</a>
					</li>
					<li class="menu__item">
						<a href="instruction.html" class="menu__link">Instruction</a>
					</li>
					<li class="menu__item">
						<a href="contact.html" class="menu__link">Contact</a>
					</li>
				</ul>
			</div>
		</div>

		<div class="wrap__inner">
			<div class="row">
				<div class="col-12 col-lg-6">
					<div class="book">
						<picture>
							<source media="(min-width: 1024px)" srcset="style/images/events/elements/cover.png">
							<source media="(min-width: 768px)" srcset="style/images/events/elements/cover.png">
							<source media="(max-width: 767px)" srcset="style/images/events/elements/cover-m.png">
							<img class="book__img" src="style/images/events/elements/cover.png" alt="日記本">
						</picture>
					</div>
				</div>
				<div class="col-12 col-lg-6">
                    <div class="dialog-outer">
                        <div class="dialog">
                            <div class="dialog__inner">
                                <div class="dialog__text">2000年，一位渴望走出自己的音樂風格的年輕音樂人Leon，正用他的熱情在挑戰世界</div>
                                <div class="dialog__text">自小對音樂有極高天賦的他，在求學期間就已經累積了大量的創作作品</div>
                                <div class="dialog__text">無奈伯樂難尋，他的音樂並沒有受到社會的青睞</div>
                                <div class="dialog__text">今年剛滿22歲的Leon，沒有穩定的收入只能勉強的撐在溫飽邊緣</div>
                                <div class="dialog__text">貧困的現實串聯極大的心理壓力動搖了他的意志：「我是不是該現實一點...放棄音樂呢？」</div>
                                <div class="dialog__text">這天，Leon和朋友們在路上遊走，路過一戶人家</div>
                                <div class="dialog__text">門口堆著即將淘汰的破舊古物，而這堆垃圾中有一本殘破不堪的日記本莫名吸引他的目光 ......</div>
                            </div>
                        </div>
						<a href="room.html" class="btn dialog-btn" title="Discover">
							<img src="style/images/events/elements/p1-btn.png" alt="Discover">
						</a>
					</div>
                </div>
			</div>
		</div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
	<script src="style/js/scroll_animate.js"></script>
	<script src="style/js/anime.min.js"></script>
	<script src="style/js/lodash.min.js"></script>
	<script>
		var index = 0,
		 	item_old = null,
		 	item_new = null,
			createTimer = null,
			deleteTimer = null,
			animation = null;
		$(function(){
			// 手機板計算高度避免畫面可以scroll(手機板網址列的關係)
			calHeight();
			window.addEventListener("resize", calHeight);

			setTimeout(function() {
				anime.timeline()
					.add({
						targets: ".book",
						opacity: [0, 1],
						translateY: [30, 0],
						duration: 1000,
						easing: "easeInSine"
					})
					.add({
						targets: ".dialog",
						opacity: [0, 1],
						duration: 1000,
						easing: "easeInSine",
						complete: function(){
							animateText();
							countDown();
							window.addEventListener("wheel", _.debounce((event)=>animeChange(event), 200));
						}
					}, '-=1000')
					.add({
						targets: ".dialog-btn",
						opacity: [0, 1],
						duration: 500,
						easing: "easeInSine",
					}, '-=600');
			}, 1000);
		})
		.on("click", ".menu__trigger", function(event){
			event.preventDefault();
			var menu  = $(".menu");
			menu.toggleClass("menu--active")
		});

		// 計算頁面高度
		function calHeight() {
			var wrap = $(".wrap");
			if ($(window).width() > 1023) {
				wrap.height("");
			} else {
				wrap.height(window.innerHeight);
			}
			var book = $(".book");
			if ($(window).width() > 1023) {
				book.css("minHeight", "");
			} else {
				book.css("minHeight", window.innerHeight);
			}
		}

		function animeChange(event) {
			if (event.deltaY < 0) {
				if (index-1 < 0) {
					return false;
				} else {
					item_new.css("display", "none");
					item_old.css("display", "none");
					index--;
				}
			} else {
				if (index+1 >= $(".dialog__text").length) {
					return false;
				} else {
					item_new.css("display", "none");
					item_old.css("display", "none");
					index++;
				}
			}
			animation.seek(animation.duration)
			clearTimeout(createTimer);
			clearTimeout(deleteTimer);
			animateText();
			countDown();
		}
		function countDown() {
			if (index < $(".dialog__text").length-1) {
				createTimer = setTimeout(function () {
					index++;
					animateText();
					countDown();
				}, 3500);
			}
		}
		function animateText() {
			if (item_old) item_old.css("display", "none");
			item_new = $(".dialog__text").eq(index);
			animation = anime({
				targets: item_new[0],
				opacity: [0, 1],
				translateY: [5, 0],
				duration: 250,
				easing: "linear",
				begin: function(anim) {
					item_new.css("display", "block")
				},
				complete: function(anim) {
					if (index < $(".dialog__text").length-1) {
						item_old = $(".dialog__text").eq(index);
					}
				}
			});
		}
	</script>
	<!-- 程式說明 -上線前請移除 End-->
</body>
</html>